const formSignUp=document.getElementById("form-signup"),formLogin=document.getElementById("form-login"),authApiURL="http://localhost:8000/api/wairent/v1/user";function setErrorInput(e){if("string"==typeof e){const t=e.toLowerCase(),n=[{pattern:/duplicate\s+entry/g,msg:"Email already registered",parentEl:document.getElementById("error-signup")},{pattern:/incorrect\s+password/,msg:t,parentEl:document.getElementById("error-login")},{pattern:/user\b.*\exist/,msg:"User do not exist ",parentEl:document.getElementById("error-login")}].filter((e=>e.pattern.test(t)))[0];if(!n)return console.log(t);n.parentEl.innerHTML="";const o=document.createElement("p"),r=document.createTextNode(n.msg);return o.appendChild(r),void n.parentEl.appendChild(o)}e.forEach((e=>{const t=`error-${e.param}`,n=document.getElementById(t);n.innerHTML="";const o=document.createElement("p"),r=document.createTextNode(e.msg);o.appendChild(r),n.appendChild(o)}))}formSignUp?.addEventListener("submit",(async function(e){e.preventDefault();const t={email:document.getElementById("email").value,password:document.getElementById("password").value,confirmPassword:document.getElementById("confirm-password").value,username:document.getElementById("username").value,age:document.getElementById("age").value,favTag:selectedTag||[]};try{const e=`${authApiURL}/signup`,n=await fetch(e,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}),{message:o,status:r}=await n.json();if("success"!==r)return setErrorInput(o);window.location="/"}catch(e){setErrorInput(e)}})),formLogin?.addEventListener("submit",(async function(e){e.preventDefault();const t=`${authApiURL}/login`,n={email:document.getElementById("email").value,password:document.getElementById("password").value};try{const e=await fetch(t,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}),{status:o,message:r}=await e.json();if("success"!==o)return setErrorInput(r);window.location="/"}catch(e){console.log(e)}}));
//# sourceMappingURL=authFormHandler.js.map